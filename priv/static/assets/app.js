(()=>{var Q=11;function de(e,r){var t=r.attributes,n,a,l,u,m;if(!(r.nodeType===Q||e.nodeType===Q)){for(var w=t.length-1;w>=0;w--)n=t[w],a=n.name,l=n.namespaceURI,u=n.value,l?(a=n.localName||a,m=e.getAttributeNS(l,a),m!==u&&(n.prefix==="xmlns"&&(a=n.name),e.setAttributeNS(l,a,u))):(m=e.getAttribute(a),m!==u&&e.setAttribute(a,u));for(var E=e.attributes,S=E.length-1;S>=0;S--)n=E[S],a=n.name,l=n.namespaceURI,l?(a=n.localName||a,r.hasAttributeNS(l,a)||e.removeAttributeNS(l,a)):r.hasAttribute(a)||e.removeAttribute(a)}}var O,ue="http://www.w3.org/1999/xhtml",f=typeof document>"u"?void 0:document,he=!!f&&"content"in f.createElement("template"),fe=!!f&&f.createRange&&"createContextualFragment"in f.createRange();function pe(e){var r=f.createElement("template");return r.innerHTML=e,r.content.childNodes[0]}function me(e){O||(O=f.createRange(),O.selectNode(f.body));var r=O.createContextualFragment(e);return r.childNodes[0]}function ge(e){var r=f.createElement("body");return r.innerHTML=e,r.childNodes[0]}function ve(e){return e=e.trim(),he?pe(e):fe?me(e):ge(e)}function $(e,r){var t=e.nodeName,n=r.nodeName,a,l;return t===n?!0:(a=t.charCodeAt(0),l=n.charCodeAt(0),a<=90&&l>=97?t===n.toUpperCase():l<=90&&a>=97?n===t.toUpperCase():!1)}function ye(e,r){return!r||r===ue?f.createElement(e):f.createElementNS(r,e)}function be(e,r){for(var t=e.firstChild;t;){var n=t.nextSibling;r.appendChild(t),t=n}return r}function F(e,r,t){e[t]!==r[t]&&(e[t]=r[t],e[t]?e.setAttribute(t,""):e.removeAttribute(t))}var Z={OPTION:function(e,r){var t=e.parentNode;if(t){var n=t.nodeName.toUpperCase();n==="OPTGROUP"&&(t=t.parentNode,n=t&&t.nodeName.toUpperCase()),n==="SELECT"&&!t.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!r.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),t.selectedIndex=-1)}F(e,r,"selected")},INPUT:function(e,r){F(e,r,"checked"),F(e,r,"disabled"),e.value!==r.value&&(e.value=r.value),r.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,r){var t=r.value;e.value!==t&&(e.value=t);var n=e.firstChild;if(n){var a=n.nodeValue;if(a==t||!t&&a==e.placeholder)return;n.nodeValue=t}},SELECT:function(e,r){if(!r.hasAttribute("multiple")){for(var t=-1,n=0,a=e.firstChild,l,u;a;)if(u=a.nodeName&&a.nodeName.toUpperCase(),u==="OPTGROUP")l=a,a=l.firstChild,a||(a=l.nextSibling,l=null);else{if(u==="OPTION"){if(a.hasAttribute("selected")){t=n;break}n++}a=a.nextSibling,!a&&l&&(a=l.nextSibling,l=null)}e.selectedIndex=t}}},L=1,ee=11,te=3,re=8;function y(){}function we(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function Se(e){return function(r,t,n){if(n||(n={}),typeof t=="string")if(r.nodeName==="#document"||r.nodeName==="HTML"||r.nodeName==="BODY"){var a=t;t=f.createElement("html"),t.innerHTML=a}else t=ve(t);else t.nodeType===ee&&(t=t.firstElementChild);var l=n.getNodeKey||we,u=n.onBeforeNodeAdded||y,m=n.onNodeAdded||y,w=n.onBeforeElUpdated||y,E=n.onElUpdated||y,S=n.onBeforeNodeDiscarded||y,I=n.onNodeDiscarded||y,ie=n.onBeforeElChildrenUpdated||y,oe=n.skipFromChildren||y,J=n.addChild||function(i,o){return i.appendChild(o)},B=n.childrenOnly===!0,T=Object.create(null),M=[];function x(i){M.push(i)}function G(i,o){if(i.nodeType===L)for(var d=i.firstChild;d;){var s=void 0;o&&(s=l(d))?x(s):(I(d),d.firstChild&&G(d,o)),d=d.nextSibling}}function R(i,o,d){S(i)!==!1&&(o&&o.removeChild(i),I(i),G(i,d))}function V(i){if(i.nodeType===L||i.nodeType===ee)for(var o=i.firstChild;o;){var d=l(o);d&&(T[d]=o),V(o),o=o.nextSibling}}V(r);function _(i){m(i);for(var o=i.firstChild;o;){var d=o.nextSibling,s=l(o);if(s){var c=T[s];c&&$(o,c)?(o.parentNode.replaceChild(c,o),H(c,o)):_(o)}else _(o);o=d}}function le(i,o,d){for(;o;){var s=o.nextSibling;(d=l(o))?x(d):R(o,i,!0),o=s}}function H(i,o,d){var s=l(o);if(s&&delete T[s],!d){var c=w(i,o);if(c===!1||(c instanceof HTMLElement&&(i=c,V(i)),e(i,o),E(i),ie(i,o)===!1))return}i.nodeName!=="TEXTAREA"?se(i,o):Z.TEXTAREA(i,o)}function se(i,o){var d=oe(i,o),s=o.firstChild,c=i.firstChild,N,p,C,P,g;e:for(;s;){for(P=s.nextSibling,N=l(s);!d&&c;){if(C=c.nextSibling,s.isSameNode&&s.isSameNode(c)){s=P,c=C;continue e}p=l(c);var U=c.nodeType,v=void 0;if(U===s.nodeType&&(U===L?(N?N!==p&&((g=T[N])?C===g?v=!1:(i.insertBefore(g,c),p?x(p):R(c,i,!0),c=g,p=l(c)):v=!1):p&&(v=!1),v=v!==!1&&$(c,s),v&&H(c,s)):(U===te||U==re)&&(v=!0,c.nodeValue!==s.nodeValue&&(c.nodeValue=s.nodeValue))),v){s=P,c=C;continue e}p?x(p):R(c,i,!0),c=C}if(N&&(g=T[N])&&$(g,s))d||J(i,g),H(g,s);else{var X=u(s);X!==!1&&(X&&(s=X),s.actualize&&(s=s.actualize(i.ownerDocument||f)),J(i,s),_(s))}s=P,c=C}le(i,c,p);var Y=Z[i.nodeName];Y&&Y(i,o)}var h=r,D=h.nodeType,K=t.nodeType;if(!B){if(D===L)K===L?$(r,t)||(I(r),h=be(r,ye(t.nodeName,t.namespaceURI))):h=t;else if(D===te||D===re){if(K===D)return h.nodeValue!==t.nodeValue&&(h.nodeValue=t.nodeValue),h;h=t}}if(h===t)I(r);else{if(t.isSameNode&&t.isSameNode(h))return;if(H(h,t,B),M)for(var W=0,ce=M.length;W<ce;W++){var q=T[M[W]];q&&R(q,q.parentNode,!1)}}return!B&&h!==r&&r.parentNode&&(h.actualize&&(h=h.actualize(r.ownerDocument||f)),r.parentNode.replaceChild(h,r)),h}}var Ae=Se(de),Ee=Ae,Te=class{constructor(){this.structure=new Map}initialize(e){this.structure=new Map(Object.entries(JSON.parse(JSON.stringify(e))))}applyDiff(e,r){if(r?.type==="stateful"){this.structure.set(r.id,r);return}if(!this.structure.has(e)){let t=String(e).replace(/\r|\n/g,"");console.warn(`[Arizona] StatefulId '${t}' not found in structure`)}for(let[t,n]of r)if(n&&typeof n=="object"&&n.type)this.structure.get(e).dynamic[t-1]=n;else if(Array.isArray(n)){let a=this.structure.get(e).dynamic[t-1];a&&a.type==="list"?this.structure.get(e).dynamic[t-1].dynamic=n:a&&a.type==="stateless"?n.forEach(([l,u])=>{this.structure.get(e).dynamic[t-1].dynamic[l-1]=u}):this.structure.get(e).dynamic[t-1]=n}else this.structure.get(e).dynamic[t-1]=n}generateStatefulHTML(e){let r=this.structure.get(e);if(!r){let t=String(e).replace(/\r|\n/g,"");console.warn(`[Arizona] StatefulId '${t}' not found in structure`)}return this.zipStaticDynamic(r.static,r.dynamic)}generateStatelessHTML(e){return this.zipStaticDynamic(e.static,e.dynamic)}generateListHTML(e){let{static:r,dynamic:t}=e;return t.reduce((n,a)=>n+this.zipStaticDynamic(r,a),"")}zipStaticDynamic(e,r){let t=[],n=Math.max(e.length,r.length);for(let a=0;a<n;a++)a<e.length&&t.push(e[a]),a<r.length&&t.push(this.normalizeDynamicElement(r[a]));return t.join("")}normalizeDynamicElement(e){return typeof e=="string"?e:e&&e.type==="stateful"?this.generateStatefulHTML(e.id):e&&e.type==="stateless"?this.generateStatelessHTML(e):e&&e.type==="list"?this.generateListHTML(e):Array.isArray(e)?this.flattenIoData(e):String(e)}flattenIoData(e){return typeof e=="string"?e:typeof e=="number"?String(e):Array.isArray(e)?e.map(r=>this.flattenIoData(r)).join(""):e&&typeof e=="object"?e.type==="stateful"?this.generateStatefulHTML(e.id):e.type==="stateless"?this.generateStatelessHTML(e):e.type==="list"?this.generateListHTML(e):String(e):String(e||"")}getStructure(){return JSON.parse(JSON.stringify(Object.fromEntries(this.structure)))}isInitialized(){return this.structure.size>0}getComponentIds(){return Array.from(this.structure.keys())}clear(){this.structure=new Map}createPatch(e){return{type:"html_patch",statefulId:e,html:this.generateStatefulHTML(e)}}createInitialPatch(e){return{type:"initial_render",statefulId:e,html:this.generateStatefulHTML(e)}}},Ne=Te,k={silent:-1,error:3,warning:4,info:6,debug:7},ne=class{constructor(e={}){this.worker=null,this.connected=!1,this.hierarchical=new Ne,this.logLevel=k[e.logLevel]??k.silent}connect(e={}){if(this.connected)return;let r=e.wsPath||"/live",t=e.workerPath||"/assets/js/arizona-worker.min.js";this.worker=new Worker(t,{type:"module"});let n=window.location.protocol==="https:"?"wss:":"ws:",a=window.location.host,l=window.location.pathname,u=window.location.search,m=encodeURIComponent(l),w=u?encodeURIComponent(u.substring(1)):"",E=`${n}//${a}${r}?path=${m}&qs=${w}`;this.worker.postMessage({type:"connect",data:{url:E}}),this.worker.onmessage=S=>{this.handleWorkerMessage(S.data)}}sendEvent(e,r={}){this.connected&&this.worker.postMessage({type:"send",data:{type:"event",event:e,params:r}})}sendEventTo(e,r,t={}){this.connected&&this.worker.postMessage({type:"send",data:{type:"event",stateful_id:e,event:r,params:t}})}disconnect(){this.worker&&(this.worker.terminate(),this.worker=null),this.connected=!1,this.hierarchical.clear()}handleWorkerMessage(e){let{type:r,data:t}=e;try{switch(r){case"status":this.handleStatus(t);break;case"html_patch":this.handleHtmlPatch(t);break;case"error":this.handleWorkerError(t);break;case"reload":this.handleReload(t);break;case"reply":this.handleReply(t);break;case"redirect":this.handleRedirect(t);break;default:this.handleUnknownMessage(e)}}catch(n){this.error("Error handling worker message:",n)}}handleStatus(e){e.status==="connected"?(this.connected=!0,this.info("Connected to WebSocket")):e.status==="disconnected"&&(this.connected=!1,this.info("Disconnected from WebSocket")),this.dispatchArizonaEvent("status",e)}handleHtmlPatch(e){let{patch:r,isInitial:t}=e;t?this.handleInitialRender(r):this.handleDiffPatch(r)}handleInitialRender(e){this.debug("Applying initial render"),e.structure&&this.hierarchical.initialize(e.structure),this.applyHtmlPatch(e)}handleDiffPatch(e){this.debug("Applying diff patch"),this.applyHtmlPatch(e)}applyHtmlPatch(e){let r=document.getElementById(e.statefulId);if(!r){this.warning(`Target element not found: ${e.statefulId}`);return}try{Ee(r,e.html,{onBeforeElUpdated(t,n){return!t.isEqualNode(n)}}),this.debug("Patch applied successfully"),r.dispatchEvent(new CustomEvent("arizona:patched",{detail:{patch:e}}))}catch(t){this.error("Error applying HTML patch:",t)}}handleWorkerError(e){this.error("Worker Error:",e.error),this.dispatchArizonaEvent("error",e)}handleReload(e){switch(e.file_type){case"css":this.info("CSS file changed. Refreshing stylesheets without page reload..."),document.querySelectorAll('link[rel="stylesheet"]').forEach(r=>{let t=r.href.split("?")[0];r.href=`${t}?t=${Date.now()}`});break;default:this.info(`${e.file_type||"File"} changed. Reloading page...`),window.location.reload()}}handleReply(e){this.debug("WebSocket reply:",e),this.dispatchArizonaEvent("reply",e)}handleRedirect(e){this.info("Redirecting to:",e.url),this.dispatchArizonaEvent("redirect",e),window.open(e.url,e.options?.target,e.options?.window_features)}handleUnknownMessage(e){this.warning("Unknown worker message:",e)}dispatchArizonaEvent(e,r){document.dispatchEvent(new CustomEvent("arizonaEvent",{detail:{type:e,data:r}}))}isConnected(){return this.connected}error(e,...r){console.error(`[Arizona] ${e}`,...r)}warning(e,...r){this.logLevel>=k.warning&&console.warn(`[Arizona] ${e}`,...r)}info(e,...r){this.logLevel>=k.info&&console.log(`[Arizona] ${e}`,...r)}debug(e,...r){this.logLevel>=k.debug&&console.log(`[Arizona] ${e}`,...r)}};globalThis.arizona=new ne({logLevel:"debug"});arizona.connect({wsPath:"/live"});var b=0,A=document.querySelectorAll(".carousel-slide"),z=document.querySelectorAll(".carousel-dot"),ae=document.getElementById("carousel-slides");function j(e){let r=-e*33.333333;if(ae&&(ae.style.transform=`translateX(${r}%)`),A.forEach((t,n)=>{n===e?(t.classList.remove("overflow-hidden"),t.classList.add("overflow-x-auto")):(t.classList.remove("overflow-x-auto"),t.classList.add("overflow-hidden"))}),z.forEach(t=>{t.classList.remove("active"),t.classList.remove("bg-erlang-red"),t.classList.add("bg-gray-600")}),A[e]){let t=A[e].getAttribute("data-file"),n=document.getElementById("file-name");n&&t&&(n.textContent=t);let a=A[e].getAttribute("data-label"),l=document.getElementById("example-label");l&&a&&(l.textContent=a),z[e]&&(z[e].classList.add("active"),z[e].classList.add("bg-erlang-red"),z[e].classList.remove("bg-gray-600"))}}function Ce(){b=(b+1)%A.length,j(b)}function Le(){b=(b-1+A.length)%A.length,j(b)}function ke(e){b=e,j(b)}globalThis.nextExample=Ce;globalThis.prevExample=Le;globalThis.goToExample=ke;document.addEventListener("DOMContentLoaded",function(){j(0)});})();
